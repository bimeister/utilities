variables:
  GIT_SUBMODULE_STRATEGY: normal
  CI: ''
  BUILD_EFFECTIVE_YML_FILE: docker-compose.yml
  NPM_AUTH_TOKEN: ${CI_JOB_TOKEN}
  GIT_COMMIT_HASH: ${CI_COMMIT_SHORT_SHA}
  DEFAULT_LABELS: meistersoft.build.pipeline=${CI_PIPELINE_IID};meistersoft.git.commit=${GIT_COMMIT};meistersoft.git.branch=${BRANCH_NAME}
  BASE_IMAGE: base-image:${CI_COMMIT_SHORT_SHA}
  BUILD_IMAGE: build-image:${CI_COMMIT_SHORT_SHA}

before_script:
  - docker --version
  - docker-compose --version
  - docker login --username $DOCKER_REGISTRY_USER --password $DOCKER_REGISTRY_PASS $DOCKER_REGISTRY
